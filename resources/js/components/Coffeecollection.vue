<template>
    <div>
        <div id="container-wallpaper">
        </div>
        <div id="inside-container" class="container">
            <div class="row align-items-start justify-content-center">
                <div class="col-4 col-md-2">
                     <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="collaborative-picture" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"><metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata><g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M512,4072.8l-412-412l30.6-79.5c53-155,177.4-407.9,267.2-550.7c59.1-95.9,208-261.1,452.8-503.8c338.6-336.5,371.2-363,440.5-363c104,0,171.3,36.7,208,112.2c36.7,79.5,38.8,120.3,10.2,175.4c-32.6,57.1-4.1,46.9,83.6-32.6c110.1-97.9,199.9-97.9,297.8,0c65.3,65.3,71.4,81.6,63.2,161.1l-10.2,89.7l69.4-40.8c171.3-102,375.3,53,316.1,242.7c-20.4,65.3,28.6,22.4,369.2-316.1c381.4-379.4,395.7-391.6,477.3-391.6c157,0,263.1,150.9,201.9,289.6c-16.3,38.8-297.8,336.5-662.9,699.6c-348.8,346.7-634.3,638.4-634.3,646.5c0,10.2,97.9,16.3,216.2,16.3h216.2l69.3,69.3c57.1,57.1,69.3,85.7,69.3,153c0,46.9-14.3,112.2-30.6,144.8c-55.1,108.1-99.9,116.3-611.9,128.5c-414,8.2-495.6,16.3-693.4,63.2c-122.4,28.6-263.1,65.3-308,81.6l-83.6,28.6L512,4072.8z"/><path d="M8963.8,4446.1c-32.6-12.2-157-42.8-275.3-73.4c-187.6-44.9-275.3-53-707.7-65.3l-495.6-12.2l-61.2-61.2c-114.2-114.2-102-289.6,26.5-381.4c55-38.8,85.6-44.9,273.3-40.8c116.2,2,210-2,210-10.2c0-8.2-297.8-314.1-662.9-679.2l-662.8-664.9v-87.7c0-161.1,165.2-257,312.1-183.6c24.5,12.2,206,181.5,401.8,377.3l356.9,354.9l-6.1-99.9c-6.1-79.5,2-108.1,40.8-153c65.3-77.5,201.9-95.9,279.4-36.7l55,40.8v-102c-2-89.7,6.1-108.1,65.3-161.1c102-91.8,210-77.5,334.5,38.8l57.1,51l-18.4-61.2c-40.8-144.8,55.1-271.3,208.1-271.3c79.6,0,93.8,10.2,438.5,352.8c436.5,432.4,520.1,550.7,707.7,999.4l59.2,138.7l-407.9,407.9c-222.3,222.3-420.1,405.9-436.5,403.8C9039.3,4466.5,8998.5,4456.3,8963.8,4446.1z"/><path d="M5527.2,3224.4c0-562.9,14.3-530.3-199.8-428.3c-210.1,99.9-383.5,71.4-485.4-79.5c-67.3-97.9-67.3-252.9-2-350.8c49-75.5,197.8-161.1,275.4-161.1c26.5,0,110.1,28.5,187.6,61.2c77.5,34.7,163.2,61.2,189.7,61.2h51l-4.1-520.1l-2.1-520.1h528.3h528.2l-14.3-65.3c-8.1-36.7-36.7-110.1-63.2-163.2c-136.6-263.1,2-526.2,277.4-526.2c255,0,387.5,269.2,257,522.1c-28.6,57.1-55.1,130.5-59.2,163.2l-6.1,59.1l485.4,6.1l483.3,4.1v609.8v609.8h-79.6c-99.9,2-195.8,49-240.6,122.4c-18.4,30.6-36.7,59.2-40.8,63.2c-4.1,6.1-142.8-124.4-308-287.6c-346.7-344.7-401.8-375.3-565-314.1c-157,61.2-234.6,206-193.8,363c20.4,75.5,97.9,163.2,607.8,675.1l585.3,585.4H6622.5H5527.2V3224.4z"/><path d="M2879.9,3108.1c511.9-514,585.3-597.6,599.6-664.9c42.8-240.7-193.8-442.6-412-350.8c-46.9,20.4-189.7,142.8-365.1,316.1l-285.5,285.5l-59.1-73.4c-65.3-81.6-132.6-114.2-240.7-114.2c-51,2-77.5-8.2-77.5-24.5c0-14.3-26.5-65.3-61.2-110.1l-61.2-85.7v-509.9v-509.9H2419h501.7l-12.2-55.1c-8.2-32.6-38.8-104-67.3-163.2c-128.5-259,12.2-516,285.5-516c118.3,0,214.2,65.3,275.3,183.6c59.2,118.3,57.1,167.2-16.3,322.2c-34.7,71.4-61.2,153-61.2,179.5v49h509.9h509.9v532.3v532.3l-65.3-14.3c-36.7-8.2-110.1-36.7-163.2-63.2c-191.7-95.9-397.7-36.7-483.4,140.7c-55.1,112.2-53,167.2,4.1,279.4c87.7,175.4,257,240.7,430.3,163.2c159.1-69.3,244.7-99.9,261.1-87.7c10.2,4.1,16.3,218.2,16.3,477.3v467.1H3320.4H2294.6L2879.9,3108.1z"/><path d="M1896.8-991.4v-1056.5l569,569l569,569l112.2,10.2c220.3,18.4,371.2-144.8,330.4-358.9c-12.2-63.2-67.3-128.5-322.2-385.5c-169.3-171.3-303.9-314.1-297.8-318.2c4.1-4.1,34.7-22.4,65.3-42.8c69.4-42.9,144.8-199.9,130.5-271.3c-6.1-38.8,2-53,40.8-69.3c26.5-10.2,316.1-18.3,640.4-18.3h589.4v469.1v469.1h-51c-28.5,0-97.9-22.5-153-51c-263.1-132.6-534.4,8.1-534.4,275.3c0,265.1,254.9,401.8,520.1,277.4c59.2-28.6,130.5-57.1,163.2-63.2l55.1-14.3v532.3V63.1h-501.7h-499.7l14.3-44.9c6.1-26.5,36.7-95.8,63.2-155c114.2-244.7-6.1-485.4-254.9-509.9c-81.6-6.1-120.3,0-187.6,38.8C2782-508,2735.1-312.2,2841.1-106.2C2935,73.3,2963.5,63.1,2396.5,63.1h-499.7V-991.4z"/><path d="M5545.6-134.7c-2-87.7-4.1-314.1-6.1-505.8c-2.1-405.9,4.1-395.7-208-297.8c-212.1,99.9-367.1,81.6-483.4-57.1c-144.8-173.4-46.9-450.8,183.6-509.9c97.9-26.5,161.1-16.3,295.7,51c53,26.5,124.4,48.9,159.1,48.9h61.2v-499.7v-499.7h618c599.6,0,618,2.1,703.6,44.9c79.6,42.8,85.6,53,85.6,128.5c0,77.5,79.6,234.6,118.3,234.6c8.2,0,28.6,10.2,44.9,20.4c24.5,14.3-30.6,79.5-269.2,320.2c-238.6,240.7-301.9,318.2-320.2,383.4c-61.2,230.5,146.9,436.5,375.3,375.3c67.3-18.3,167.3-108.1,567-503.7l483.3-481.3v952.5V22.3H7475c-550.7,0-522.1,14.3-418.1-193.8c73.4-148.9,77.5-254.9,14.3-367.1c-130.5-230.5-454.8-226.4-579.2,8.1c-63.2,118.3-59.2,195.8,14.3,352.9c102,216.2,136.7,199.9-448.7,199.9h-509.9L5545.6-134.7z"/><path d="M2423-1644l-669-669v189.7c0,118.3-10.2,216.2-28.6,259c-34.7,81.6-138.7,153-226.4,153c-32.6,0-91.8-18.3-128.5-40.8c-112.2-69.3-126.5-132.6-126.5-579.2c0-418.1-18.4-571.1-114.2-928l-53-191.7l405.9-405.9c222.3-222.3,418.1-403.8,434.4-403.8c44.9,0,412,169.3,579.2,267.2c181.5,108.1,860.7,768.9,887.2,864.8c22.4,83.6-6.1,173.4-73.4,232.5c-44.9,38.7-71.4,44.9-153,38.7l-97.9-10.2l71.4,79.6c55.1,61.2,71.4,95.8,71.4,157c0,146.9-142.8,257-271.3,208.1l-53-20.4l38.8,65.2c61.2,100,53,208-20.4,283.5c-57.1,57.1-71.4,61.2-165.2,53l-104-10.2l367.1,369.2c204,201.9,377.3,393.6,389.6,424.2c48.9,134.6-59.1,281.4-208,281.4C3092-977.1,3081.8-987.3,2423-1644z"/><path d="M6677.5-1046.4c-55-55.1-69.3-85.7-69.3-146.9c0-73.4,20.4-97.9,389.5-469.1l389.6-389.6l-102,10.2c-87.7,8.2-108.1,2-165.2-48.9c-89.7-81.6-102-179.5-36.7-275.3l51-73.4l-65.3,18.4c-97.9,30.6-208-22.4-248.8-118.3c-38.8-91.8-24.5-157,51-252.9l57.1-71.4l-95.9,6.1c-132.6,10.2-204-51-218.2-187.6l-12.2-97.9l395.6-391.6c430.4-426.3,518-487.4,909.7-648.6l195.8-81.6l414,414c228.4,226.4,410,420.2,405.9,428.3c-20.4,30.6-130.5,503.8-150.9,644.5c-12.2,79.6-22.4,314.1-22.4,520.1c0,332.4-4.1,379.3-38.8,436.5c-77.5,128.5-271.2,140.7-381.4,26.5c-57.1-59.1-59.2-71.4-69.4-285.5l-10.2-222.3l-632.3,634.3c-346.7,346.7-656.7,646.5-687.3,662.9C6836.6-956.7,6755-968.9,6677.5-1046.4z"/></g></g>
                    </svg>
                </div>
                <div class="col-8 col-md-7 align-self-center">
                    <h5>This is a collaborative website to help coffee lovers find the perfect coffee</h5>
                </div>
            </div>
             <div class="row justify-content-center justify-content-md-center justify-content-xl-center">
                <div class="col-4  col-md-3 col-xl-2">
                    <a class="btn btn-dark button-styled" role="button" v-if="this.userLoggedin" href="/home">Home</a>
                    <a class="btn btn-dark button-styled" role="button" v-else href="/login">Login</a>
                </div>
                <div class="col-4 col-md-3 col-xl-2">
                    <a class="btn btn-dark button-styled" role="button"  href="/register">Register</a>
                </div>
            </div>
            <div class="form-group row">
                <div class="input-group col-xl-12">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1"><i class="fas fa-search"></i></span>
                    </div>
                    <input type="text" class="form-control" v-model="search" placeholder="Search by name, city or Country">
                </div>
            </div>
            <ul class="list-group">
                <li class="list-group-item" v-for="coffee in filteredCoffees" :key="coffee.id">
                    <div class="row justify-content-xl-center">
                        <div class="col-12 col-xl-10  order-xl-2 align-self-center">
                            <h5><span class="change-color"><strong>Name: </strong></span>{{coffee.name}}</h5>
                            <h5><span class="change-color"><strong>Location: </strong></span>{{coffee.city}},{{coffee.country}}</h5>
                            <Showstar :coffeeId="coffee.id" />
                        </div>
                        <div class="col-xl-2 order-xl-1">
                            <img class="img-fluid rounded mx-auto d-block picture-coffee" :src="'/storage/' + coffee.picture">
                        </div>
                        <div class="text-center col-12 col-xl-12 order-xl-12">
                            <a class="btn btn-outline-dark" id="button-comment" role="button" :href="'/showCoffeeComments/'+ coffee.id">Comment</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</template>

<script>
import Showstar from './Showstar.vue'
    export default {
        name:'Coffeecollection',
        components:{
            Showstar
        },
        data() {
            return {
                coffees: [],
                search: "",
                userLoggedin: null,
                }
        },
        mounted() {
            axios.get('/APIGetCoffeeDB')
                .then(response=> {
                    this.coffees=response.data
                })
                .catch(error=> {
                    console.log("Error");
                });
            axios.get('/APIconfirmLogin')
                .then(response=> {
                    console.log(response.data);
                    this.userLoggedin=response.data;
                })
                .catch(error=> {
                    console.log("Error checking user");
                });
        },
        computed: {
            filteredCoffees: function () {
                var self = this
                var matcher = new RegExp(self.search, 'i')
                return self.coffees.filter(function(coffee){
                    return matcher.test([coffee.name, coffee.city, coffee.country].join())
                })
            }
        }
}
</script>

<style scoped>
    .button-styled{
        background-color:#7a2e20;
        border:#7a2e20;
        margin-bottom:2vh;
        margin-top:2vh;
    }
    .change-color{
        color:#7a2e20;
    }
    #collaborative-picture{
        width:100%;
        fill:#7a2e20;
    }
    #button-comment{
        margin-top:1.5vh;
    }
    #container-wallpaper {
        position: fixed;
        width:100vw;
        height: 100vh;
        background-image:url('/images/coffeeIntroduction.jpg');
        opacity:0.5;
        z-index:-1;
        top:0;
    }
    #inside-container{
        background-color:white;
        width:92vw;
        margin-top:3vh;
        margin-bottom:3vh;
        padding-bottom:3vh;
        padding-top:3vh;
    }
    .picture-coffee{
        margin-top:1.5vh;
    }
</style>


// <div>Icon made from <a href="http://www.onlinewebfonts.com/icon">Icon Fonts</a> is licensed by CC BY 3.0</div>
// <div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
